{"version":3,"sources":["components/Search.js","components/AddForm.js","components/Persons.js","components/Notification.js","services/contactService.js","App.js","index.js"],"names":["Search","inputVal","handler","value","onChange","AddForm","name","number","submitHandler","type","onClick","Person","Persons","show","delHandler","map","id","Notification","message","error","style","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","baseUrl","contactService","getAll","axios","get","then","response","data","addPerson","newPerson","post","deletePerson","delete","updateNumber","put","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","search","setSearch","notif","setNotif","setError","showPersons","filter","toLowerCase","includes","useEffect","personsList","console","log","event","target","preventDefault","find","window","confirm","oldPerson","updated","person","setTimeout","catch","nanoid","concat","delPerson","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8b9b06d4.chunk.js","sourcesContent":["import React from 'react'\n\nconst Search = ({inputVal, handler}) => (\n    <>\n        filter results containing: <input value={inputVal} onChange={handler}/>\n    </>\n)\n\nexport default Search\n","import React from 'react'\n\nconst AddForm = ({name, number, submitHandler}) => (\n    <>\n    <form>\n      <div>\n        name: <input value={name.value} onChange={name.handler}/>\n      </div>\n      <div>\n        number: <input value={number.value} onChange={number.handler}/>\n      </div>\n      <div>\n        <button type=\"submit\" onClick={submitHandler}>add</button>\n      </div>\n    </form>\n    </>\n)\n\nexport default AddForm\n","import React from 'react'\n\nconst Person = ({name, number, handler}) => (\n    <>\n        <p>{name} {number}</p>\n        <button onClick={handler}>delete</button>\n    </>\n)\n\nconst Persons = ({show, delHandler}) => (\n    <>\n        {show.map(({name, number, id}) => <Person key={name} name={name} number={number} handler={() => delHandler(id)}/>)}\n    </>\n)\n\nexport default Persons\n","import React from 'react'\n\nconst Notification = ({message, error}) => {\n    const successStyle = {\n        color: 'green',\n        background: 'lightgrey',\n        fontSize: 20,\n        borderStyle: 'solid',\n        borderRadius: 5,\n        padding: 10,\n        marginBottom: 10,\n    }\n\n    const errorStyle = {\n        color: 'red',\n        background: 'lightgrey',\n        fontSize: 20,\n        borderStyle: 'solid',\n        borderRadius: 5,\n        padding: 10,\n        marginBottom: 10,\n    }\n\n    if(message) {\n        return (\n            <div style={error ? errorStyle : successStyle}>\n                {message}\n            </div>\n        )\n    }\n    else {\n        return null\n    }\n\n}\n\nexport default Notification\n","import axios from 'axios'\n\nconst baseUrl = \"/api/persons\"\n\nconst getAll = () => {\n    return axios\n        .get(baseUrl)\n        .then(response => response.data)\n}\n\nconst addPerson = (newPerson) => {\n    return axios\n        .post(baseUrl, newPerson)\n        .then(response => response.data)\n}\n\nconst deletePerson = (id) => {\n    return axios\n        .delete(`${baseUrl}/${id}`)\n        .then(response => response)\n}\n\nconst updateNumber = (id, newPerson) => {\n    return axios\n        .put(`${baseUrl}/${id}`, newPerson)\n        .then(response => response.data)\n}\n\nconst contactService = {\n    getAll,\n    addPerson,\n    deletePerson,\n    updateNumber,\n}\n\nexport default contactService\n","import React, { useState, useEffect } from 'react'\nimport { nanoid } from 'nanoid'\n\nimport Search from './components/Search'\nimport AddForm from './components/AddForm'\nimport Persons from './components/Persons'\nimport Notification from './components/Notification'\n\nimport contactService from './services/contactService'\n\n\n\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber] = useState('')\n  const [ search, setSearch] = useState('')\n  const [ notif, setNotif ] = useState('')\n  const [ error, setError ] = useState(false)\n\n  const handleNewName = (event) => {\n      setNewName(event.target.value)\n  }\n\n  const handleNewNum = (event) => {\n      setNewNumber(event.target.value)\n  }\n\n  const handleSearch = (event) => {\n      setSearch(event.target.value)\n  }\n\n  const handleDelete = (id) => {\n      const delPerson = persons.find(person => person[\"id\"] === id)\n      const result = window.confirm(`Are you sure you want to delete ${delPerson[\"name\"]} from the phonebook?`)\n      if(result) {\n          contactService\n            .deletePerson(id)\n            .then(response => {\n                setPersons(persons.filter(person => person.id !== id))\n            })\n      }\n  }\n\n  const handleSubmit = (event) => {\n      event.preventDefault()\n      if(persons.find(({name}) => name === newName)) {\n          const result = window.confirm(`${newName} is already in the phonebook. Replace the old number with the new one?`)\n          if(result) {\n              const oldPerson = persons.find(({name}) => name === newName)\n              const updated = {...oldPerson, number: newNumber}\n              contactService\n                .updateNumber(updated[\"id\"], updated)\n                .then(newPerson => {\n                    setPersons(persons.map(person => person[\"id\"] !== updated[\"id\"] ? person : newPerson))\n                    setNotif(`${newPerson[\"name\"]}'s number has been updated.`)\n                    setTimeout(() => {\n                        setNotif('')\n                    }, 3000)\n                })\n                .catch(error => {\n                    setError(true)\n                    setNotif(`Error: ${updated[\"name\"]}'s information has been deleted from server.'`)\n                    setTimeout(() => {\n                        setNotif('')\n                        setError(false)\n                    }, 3000)\n                })\n          }\n      }\n      else {\n          //I decided to generate IDs on the browser side\n          //to handle the edge case of trying to delete\n          //the last added contact. The ID for its object would not be on the\n          //browser since it has just been generated on the server\n          contactService\n            .addPerson({\n                name: newName,\n                number: newNumber,\n                id: nanoid()\n            })\n            .then(newPerson => {\n                setPersons(persons.concat(newPerson))\n                setNotif(`${newPerson[\"name\"]} has been added to the phonebook.`)\n                setTimeout(() => {\n                    setNotif('')\n                }, 3000)\n\n            })\n      }\n      setNewName('')\n      setNewNumber('')\n  }\n\n  const showPersons = search === ''\n    ? persons\n    : persons.filter(({name}) => name.toLowerCase().includes(search.toLowerCase()))\n\n    useEffect(() => {\n        contactService\n            .getAll()\n            .then(personsList => {\n                console.log('connected to server')\n                setPersons(personsList)\n            })\n    }, [])\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Notification message={notif} error={error} />\n      <h2>Search</h2>\n        <Search inputVal={search} handler={handleSearch} />\n      <h2>Add New</h2>\n        <AddForm name={{\n            value: newName,\n            handler: handleNewName\n        }} number={{\n            value: newNumber,\n            handler: handleNewNum\n        }} submitHandler={handleSubmit} />\n      <h2>Numbers</h2>\n        <Persons show={showPersons} delHandler={handleDelete}/>\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}